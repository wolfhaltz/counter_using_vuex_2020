<!DOCTYPE html>
<html>
    <head>
        <title>Counter Vuex</title>

        <script src="vue.js"></script>
        <script src="vuex.js"></script>
    </head>
    <body>

        <div id="app">
            <h1>{{ welcome }}</h1>
            <h2>{{ message }}</h2>
            <h3>{{ count }}</h3>
            <button @click="pressed">Increment counter</button>
        </div>
        <script>
            const store = new Vuex.Store({
                state: {
                    message: 'Hello from Vuex',
                    count: 0
                },
                mutations: { //syncronous
                    increment(state, payload){
                        state.count+=payload;
                    }
                },
                actions: { // assyncronous
                    increment(state, payload){
                        state.commit('increment', payload)
                    }
                },
                getters: {
                    message(state){
                        return state.message.toUpperCase();
                    },
                    counter(state){
                        return state.count;
                    }
                }
            });
            new Vue({
                el: "#app",
                data(){
                    return{
                        welcome: 'Hello world'
                    }
                },
                computed: {
                    message(){
                        return store.getters.message;
                    },
                    count(){
                    return store.getters.counter;
                    }
                },
                methods: {
                    pressed(){
                        store.dispatch('increment', 20);
                    }
                }
            });
        </script>
    </body>
</html>